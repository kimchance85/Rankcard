<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>TEAM CHANCE RANKCARD</title>

<style>
  /* ============================================================
    CSS (ìŠ¤íƒ€ì¼) ì˜ì—­
    ì´ê³³ì—ì„œ ì¹´ë“œì˜ ë””ìì¸, ë ˆì´ì•„ì›ƒ, ìƒ‰ìƒ ë“± ëª¨ë“  ì‹œê°ì ì¸ ë¶€ë¶„ì„ ì œì–´í•©ë‹ˆë‹¤.
    ============================================================
  */

  /* :rootëŠ” ë¬¸ì„œ ì „ì²´ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” 'ë³€ìˆ˜'ë¥¼ ì„ ì–¸í•˜ëŠ” ê³³ì…ë‹ˆë‹¤. */
  /* ì—¬ê¸°ì„œ ìƒ‰ìƒì´ë‚˜ í¬ê¸°ë¥¼ í•œë²ˆë§Œ ë°”ê¿”ì£¼ë©´, ì´ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ê³³ì´ í•œë²ˆì— ë°”ë€ë‹ˆë‹¤. ìœ ì§€ë³´ìˆ˜ì— ë§¤ìš° í¸ë¦¬í•©ë‹ˆë‹¤. */
  :root{
    /* --cardH: ì¹´ë“œì˜ ì„¸ë¡œ ë†’ì´, --ratio: ê°€ë¡œì„¸ë¡œ ë¹„ìœ¨. --cardWëŠ” ë†’ì´ë¥¼ ë¹„ìœ¨ë¡œ ë‚˜ëˆ ì„œ ìë™ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤. */
    --cardH:720px; --ratio:1.5858; --cardW:calc(var(--cardH)/var(--ratio));
    
    /* ìƒ‰ìƒ ë³€ìˆ˜ë“¤: ì „ì²´ì ì¸ í…Œë§ˆ ìƒ‰ìƒì„ ì—¬ê¸°ì„œ ê´€ë¦¬í•©ë‹ˆë‹¤. */
    --bg:#0f1118;      /* ì „ì²´ í˜ì´ì§€ ë°°ê²½ìƒ‰ */
    --panel:#171923;    /* ì»¨íŠ¸ë¡¤ íŒ¨ë„, ìº”ë²„ìŠ¤ ë°°ê²½ìƒ‰ */
    --line:#262b3a;     /* íŒ¨ë„ í…Œë‘ë¦¬ ìƒ‰ìƒ */
    --soft:#2a3145;     /* input, select ë“± ì»¨íŠ¸ë¡¤ ìš”ì†Œ í…Œë‘ë¦¬ ìƒ‰ìƒ */
    --ink:#fff;         /* ê¸°ë³¸ ê¸€ì ìƒ‰ (í°ìƒ‰) */
    --muted:#a7adc0;    /* ì•½ê°„ íë¦° ê¸€ì ìƒ‰ (ë„ì›€ë§ í…ìŠ¤íŠ¸ ë“±) */
    --card:#111522;     /* ì¹´ë“œ ìì²´ì˜ ê¸°ë³¸ ë°°ê²½ìƒ‰ */
    --cardLine:#28314a; /* ì¹´ë“œ í…Œë‘ë¦¬ ìƒ‰ */
    --accent:#6aa8ff;   /* í”„ë¡œí•„ í…Œë‘ë¦¬ ë“± í¬ì¸íŠ¸ ìƒ‰ìƒ */
    --octo-red:#ff2d55; /* OCTOPUS íƒœê·¸ ì „ìš© ë¹¨ê°„ìƒ‰ */

    /* ìš”ì†Œ ìœ„ì¹˜(Yì¶•) ë³€ìˆ˜ë“¤: JavaScriptì—ì„œ ì´ ê°’ë“¤ì„ ë³€ê²½í•˜ì—¬ ê° ìš”ì†Œì˜ ìƒí•˜ ìœ„ì¹˜ë¥¼ ì¡°ì ˆí•©ë‹ˆë‹¤.
      ë‹¨ìœ„ëŠ” px(í”½ì…€)ì´ë©°, ì–‘ìˆ˜ ê°’ì€ ì•„ë˜ë¡œ, ìŒìˆ˜ ê°’ì€ ìœ„ë¡œ ì´ë™í•©ë‹ˆë‹¤.
    */
    --badgeY:0px;    /* ë°°ì§€ */
    --ppY:7px;       /* í”„ë¡œí•„ ì‚¬ì§„ */
    --nameY:6px;     /* ì´ë¦„ */
    --rankY:7px;     /* íƒ€ì´í‹€ */
    --brandY:11px;   /* íŒ€ ì´ë¦„(ë¸Œëœë“œ) */
    --socketY:32px;  /* ì†Œì¼“ */
    --neonY:-25px;   /* ë„¤ì˜¨ ì´ë¯¸ì§€ */
    --footerY:-5px;  /* í•˜ë‹¨ ë¬¸êµ¬ */

    /* í°íŠ¸ í¬ê¸° ë³€ìˆ˜ë“¤: JavaScriptì—ì„œ ì´ ê°’ë“¤ì„ ë³€ê²½í•˜ì—¬ ê¸€ì í¬ê¸°ë¥¼ ì¡°ì ˆí•©ë‹ˆë‹¤. */
    --nameFont:30px; 
    --rankFont:24px; 
    --brandFont:18px; 
    --footerFont:14px;
  }
  
  /* ëª¨ë“  ìš”ì†Œì— ì ìš©ë˜ëŠ” ê¸°ë³¸ ìŠ¤íƒ€ì¼. box-sizingì€ í…Œë‘ë¦¬ë¥¼ í¬í•¨í•´ì„œ í¬ê¸°ë¥¼ ê³„ì‚°í•˜ê²Œ ë§Œë“¤ì–´ ë ˆì´ì•„ì›ƒ ì¡ê¸° í¸í•˜ê²Œ í•©ë‹ˆë‹¤. */
  *{box-sizing:border-box}

  /* body: ì „ì²´ í˜ì´ì§€ì˜ ê¸°ë³¸ ìŠ¤íƒ€ì¼ì„ ì •ì˜í•©ë‹ˆë‹¤. */
  body{
    margin:0; background:var(--bg); font-family:system-ui,-apple-system,"Noto Sans KR",Segoe UI,Roboto,sans-serif; color:var(--ink);
    display:flex; align-items:flex-start; justify-content:center; min-height:100vh; padding:14px
  }

  /* .wrap: ì»¨íŠ¸ë¡¤ íŒ¨ë„ê³¼ ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸°ë¥¼ ê°ì‹¸ëŠ” ì „ì²´ ì»¨í…Œì´ë„ˆì…ë‹ˆë‹¤. */
  .wrap{width:min(880px, 94vw); display:grid; grid-template-columns:1.2fr .9fr; gap:14px}
  
  /* @media: í™”ë©´ í¬ê¸°ì— ë”°ë¥¸ ë°˜ì‘í˜• ë””ìì¸ì„ ì„¤ì •í•©ë‹ˆë‹¤. í™”ë©´ ê°€ë¡œí­ì´ 980px ì´í•˜ì¼ ë•Œ ì»¨íŠ¸ë¡¤ íŒ¨ë„ê³¼ ì¹´ë“œê°€ ì„¸ë¡œë¡œ ë°°ì¹˜ë©ë‹ˆë‹¤. */
  @media (max-width:980px){ .wrap{grid-template-columns:1fr} }

  /* ---------- ì»¨íŠ¸ë¡¤ íŒ¨ë„ ìŠ¤íƒ€ì¼ ---------- */
  .controls{
    position:relative; background:var(--panel); border:1px solid var(--line); border-radius:16px; padding:12px
  }
  /* ì´í•˜ ì»¨íŠ¸ë¡¤ íŒ¨ë„ ë‚´ë¶€ì˜ ì œëª©(h2), ì‘ì€ ê¸€ì”¨(small), ë¼ë²¨(label) ë“±ì˜ ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤. */
  .controls h2{
    font-size:16px; margin:0 0 8px 0; font-weight:800; letter-spacing:.2px
  }
  .controls small.help{color:var(--muted)}
  .controls label{display:block; font-size:13px; color:var(--muted); margin-top:6px}
  .controls input,.controls select,.controls button{
    width:100%; margin-top:6px; background:#10131b; color:#fff; border:1px solid var(--soft);
    border-radius:10px; padding:10px 12px; font-size:15px
  }
  .controls input[type="number"]{text-align:center}
  .btn{cursor:pointer}
  .btn-square{padding:10px 0; text-align:center}
  .row{display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:8px} /* 2ì—´ ê·¸ë¦¬ë“œ */
  .row-2auto{display:grid; grid-template-columns:1fr auto; gap:8px; align-items:center}
  .row-3{display:grid; grid-template-columns:auto 1fr auto auto; gap:6px; align-items:center}
  .inline{display:flex; align-items:center; gap:10px}
  .subgrid{display:grid; grid-template-columns:repeat(auto-fit, minmax(160px,1fr)); gap:8px}

  /* ìƒë‹¨ ë¹ ë¥¸ ì„¤ì • ë°” (í™”ë©´ ìŠ¤í¬ë¡¤ ì‹œ ìƒë‹¨ì— ê³ ì •ë¨) */
  .quickbar{
    position:sticky; top:8px; z-index:50; background:rgba(23,25,35,.85);
    backdrop-filter:blur(6px); border:1px solid var(--line); border-radius:12px; padding:10px; margin-bottom:10px
  }
  .quickbar .grid{
    display:grid; grid-template-columns:1fr 0.9fr auto; gap:8px; align-items:center
  }
  @media (max-width:980px){
    .quickbar .grid{grid-template-columns:1fr}
    .savebtn{width:100%}
  }

  /* details/summary íƒœê·¸: ì ‘ê³  í¼ ìˆ˜ ìˆëŠ” ì„¹ì…˜ì„ ë§Œë“­ë‹ˆë‹¤. */
  details{
    border:1px solid var(--line); border-radius:12px; padding:0; margin-top:10px; background:#121523
  }
  summary{
    list-style:none; cursor:pointer; padding:12px 14px; border-radius:12px; user-select:none;
    display:flex; align-items:center; gap:10px; font-weight:800
  }
  summary .hint{color:var(--muted); font-weight:600; font-size:12px; margin-left:auto}
  details[open] summary{border-bottom:1px solid var(--line); border-bottom-left-radius:0; border-bottom-right-radius:0}
  .section-body{padding:12px 14px}
  .pill{
    display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; background:#0e1220; border:1px solid #27314b;
    font-size:12px; color:#a7adc0
  }

  /* ì €ì¥ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
  .savebtn{padding:12px 14px; border:none; border-radius:10px; background:#3b82f6; color:#fff; font-size:16px; font-weight:800; cursor:pointer}
  .savebtn:active{transform:translateY(1px)}

  /* ìœ„ì¹˜/í°íŠ¸ ì¡°ì • í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
  .pos-grid{display:grid; grid-template-columns:1fr 92px 44px 44px 56px; gap:6px; align-items:center}
  .slider-row{display:grid; grid-template-columns:1fr auto; gap:10px; align-items:center}

  /* ---------- ì¹´ë“œ ë””ìì¸ ---------- */
  /* .canvas: ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸°ë¥¼ ê°ì‹¸ëŠ” íŒ¨ë„ */
  .canvas{
    background:var(--panel); border:1px solid var(--line); border-radius:16px; padding:12px
  }
  /* .card: ì‹¤ì œ ì¹´ë“œì˜ ë³¸ì²´. í¬ê¸°, ë°°ê²½, í…Œë‘ë¦¬ ë“± í•µì‹¬ ë””ìì¸ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. */
  .card{
    position:relative; width:var(--cardW); height:var(--cardH); /* ìœ„ì—ì„œ ì •ì˜í•œ ë³€ìˆ˜ë¡œ í¬ê¸° ì„¤ì • */
    background:var(--card); border:1px solid var(--cardLine); border-radius:22px;
    padding:16px 16px 200px; text-align:center; box-shadow:0 10px 28px rgba(0,0,0,.35);
    overflow:hidden; /* ì¹´ë“œë¥¼ ë²—ì–´ë‚˜ëŠ” ë‚´ìš©ì€ ìˆ¨ê¹€ */
    margin:0 auto; background-repeat:no-repeat; background-position:center; background-size:cover; color:var(--ink)
  }

  /* .frame: ì¹´ë“œ í…Œë‘ë¦¬ íš¨ê³¼ë¥¼ ì£¼ëŠ” ìš”ì†Œ. ê¸°ë³¸ í…Œë‘ë¦¬ ë˜ëŠ” ì´ë¯¸ì§€ í”„ë ˆì„ì´ í‘œì‹œë©ë‹ˆë‹¤. */
  .frame{position:absolute; inset:0; border-radius:22px; pointer-events:none; z-index:10; box-shadow:inset 0 0 0 2px rgba(255,255,255,.18)}
  .frame-img{position:absolute; inset:0; width:100%; height:100%; object-fit:fill; border-radius:22px; pointer-events:none; z-index:11; display:none}

  /* .badge: ìƒë‹¨ì— í‘œì‹œë˜ëŠ” "Congratulations!!" ë°°ì§€ */
  .badge{display:inline-block; padding:12px 18px; border-radius:999px; font-weight:800; letter-spacing:.4px; border:1px solid rgba(255,255,255,.28); margin-top:10px; margin-bottom:25px; font-size:28px; background:rgba(0,0,0,.18); transform:translateY(var(--badgeY))}

  /* .pp: í”„ë¡œí•„ ì‚¬ì§„ì„ ê°ì‹¸ëŠ” ì›í˜• ì»¨í…Œì´ë„ˆ */
  .pp{width:170px; height:170px; border-radius:50%; overflow:hidden; border:4px solid var(--accent); margin:4px auto 12px; position:relative; background:#1a1c24; touch-action:none; transform:translateY(var(--ppY))}
  /* .pp img: ì‹¤ì œ í”„ë¡œí•„ ì‚¬ì§„ ì´ë¯¸ì§€. JavaScriptë¡œ ìœ„ì¹˜ì™€ í¬ê¸°ê°€ ì¡°ì ˆë©ë‹ˆë‹¤. */
  .pp img{position:absolute; left:0; top:0; width:100%; height:auto; user-select:none; cursor:grab; display:none; image-orientation:from-image}
  /* .placeholder: í”„ë¡œí•„ ì‚¬ì§„ì´ ì—†ì„ ë•Œ í‘œì‹œë˜ëŠ” ì•„ì´ì½˜ */
  .placeholder{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:56px; color:#555}

  /* .name, .rank, .brand: ì´ë¦„, íƒ€ì´í‹€, íŒ€ ì´ë¦„ í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
  .name{font-size:var(--nameFont); font-weight:800; margin:4px 0; transform:translateY(var(--nameY))}
  .name .octo-tag{margin-left:8px; font-size:.72em; font-weight:900; letter-spacing:.8px; color:var(--octo-red); display:none}
  .rank{font-size:var(--rankFont); font-weight:900; letter-spacing:.8px; display:none; margin-bottom:8px; transform:translateY(var(--rankY))}
  .brand{font-size:var(--brandFont); font-weight:800; margin:6px 0 10px; letter-spacing:.6px; text-transform:uppercase; transform:translateY(var(--brandY))}

  /* .sockets: ì†Œì¼“ ì´ë¯¸ì§€ë“¤ì„ ë‹´ëŠ” ì»¨í…Œì´ë„ˆ. ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒì„ ì‚¬ìš©í•©ë‹ˆë‹¤. */
  .sockets{display:grid; justify-content:center; gap:10px; margin-top:6px; grid-template-columns:56px; transform:translateY(var(--socketY))}
  .sockets.cols2{grid-template-columns:repeat(2,56px)} /* ì†Œì¼“ì´ 2ê°œì¼ ë•Œ 2ì—´ */
  .sockets.cols3{grid-template-columns:repeat(3,56px)} /* ì†Œì¼“ì´ 3ê°œì¼ ë•Œ 3ì—´ */
  .sockets.cols4{grid-template-columns:repeat(2,56px)} /* ì†Œì¼“ì´ 4ê°œì¼ ë•Œ ë‹¤ì‹œ 2ì—´ (2x2) */

  /* .socket: ê°œë³„ ì†Œì¼“ ì•„ì´í…œ. */
  .socket{width:56px; height:56px; border-radius:12px; background:transparent; border:none; color:rgba(255,255,255,.32); display:flex; align-items:center; justify-content:center; font-size:22px; cursor:pointer; outline:1px dashed rgba(255,255,255,.18)}
  .socket img{width:100%; height:100%; object-fit:contain; border-radius:12px}
  .socket.has-img{outline:none} /* ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ ì ì„  í…Œë‘ë¦¬ ì œê±° */

  /* .neon-image-block: ë„¤ì˜¨ ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ */
  .neon-image-block{margin-top:16px; transform:translateY(var(--neonY))}
  .neon-image-block img{max-width:80%; height:auto; display:block; margin:0 auto}

  /* .footer-text: ì¹´ë“œ í•˜ë‹¨ì— ê³ ì •ëœ ë¬¸êµ¬ */
  .footer-text{position:absolute; bottom:20px; left:0; right:0; font-size:var(--footerFont); font-weight:600; line-height:1.3; text-align:center; color:var(--ink); opacity:.9; z-index:2; transform:translateY(var(--footerY))}
</style>
</head>
<body>
<div class="wrap">
  <div class="controls">
    <div class="quickbar" aria-label="ë¹ ë¥¸ ì„¤ì •">
      <div class="grid">
        <input id="nameInput" type="text" placeholder="ì´ë¦„ (ì˜ˆ: ê¹€ ì§„ë˜)" />
        <select id="rankSelect" title="íƒ€ì´í‹€ ì„ íƒ ì‹œ í”„ë ˆì„/ë°°ê²½ ìë™ ë§¤í•‘">
          <option value="">-- RANK --</option>
          <option>CORE 600</option>
          <option>CORE 1250</option>
          <option>CORE 2500</option>
          <option>CORE 5000</option>
        </select>
        <button class="savebtn" id="saveBtn" type="button">ğŸ“¥ ì¹´ë“œ ì €ì¥</button>
      </div>
      <div class="inline" style="margin-top:8px">
        <label style="display:flex;align-items:center;gap:8px;margin:0">
          <input id="octoToggle" type="checkbox" />
          <span style="font-size:14px;color:#ff8fa3">ì´ë¦„ ì˜† <b style="color:#ff2d55">OCTOPUS</b> í‘œì‹œ</span>
        </label>
        <span class="pill">ì˜¥í† í¼ìŠ¤ ìˆ˜ë£Œí•œ ê²½ìš°ë§Œ ì²´í¬</span>
      </div>
    </div>

    <details open>
      <summary>ğŸ–¼ï¸ í”„ë ˆì„/ë°°ê²½ <span class="hint">í”„ë ˆì„/ë°°ê²½ ìˆ˜ë™ì„¤ì •(ì»¤ìŠ¤í„° ë§ˆì´ì§•)</span></summary>
      <div class="section-body subgrid">
        <div>
          <label>í”„ë ˆì„ ìˆ˜ë™ ì„¤ì •</label>
          <div class="row">
            <button class="btn" id="pickFrameFile" type="button">ğŸ“¥ í”„ë ˆì„ íŒŒì¼ ì„ íƒ</button>
            <button class="btn" id="clearFrameOverride" type="button">ğŸ§¹ í”„ë ˆì„ ìˆ˜ë™ í•´ì œ</button>
          </div>
          <input id="frameFileInput" type="file" accept="image/png,image/webp,image/*" style="display:none" />
        </div>

        <div>
          <label>ë°°ê²½ ìˆ˜ë™ ì„¤ì •</label>
          <div class="row">
            <button class="btn" id="pickBgFile" type="button">ğŸ–¼ï¸ ë°°ê²½ íŒŒì¼ ì„ íƒ</button>
            <button class="btn" id="clearBgOverride" type="button">ğŸ§¹ ë°°ê²½ ìˆ˜ë™ í•´ì œ</button>
          </div>
          <input id="bgFileInput" type="file" accept="image/*" style="display:none" />
        </div>

        <div>
          <label>ë°°ê²½ í”„ë¦¬ì…‹ ì„ íƒ</label>
          <select id="bgPresetSelect">
            <option value="">ìë™(ë­í¬ ë§¤í•‘)</option>
            <option value="bg-core-600.png">bg-core-600</option>
            <option value="bg-core-1250.png">bg-core-1250</option>
            <option value="bg-core-2500.png">bg-core-2500</option>
            <option value="bg-core-5000.png">bg-core-5000</option>
          </select>
        </div>

        <div>
          <label>ë°°ê²½ ì±„ìš°ê¸° ë°©ì‹</label>
          <select id="bgFit">
            <option value="cover" selected>ì±„ìš°ê¸° (cover)</option>
            <option value="contain">ë§ì¶¤ (contain)</option>
          </select>
        </div>
      </div>
    </details>

    <details open>
      <summary>ğŸ‘¤ í”„ë¡œí•„ <span class="hint">ì—…ë¡œë“œ Â· ìœ„ì¹˜/ì¤Œ ì¡°ì •</span></summary>
      <div class="section-body">
        <div class="row">
          <div>
            <label>í”„ë¡œí•„ ì‚¬ì§„</label>
            <input id="photoInput" type="file" accept="image/*" />
          </div>
          <div>
            <label>ì´ë¯¸ì§€ ìœ„ì¹˜ ì´ˆê¸°í™”</label>
            <button id="ppReset" class="btn" type="button">ì„¼í„°ë¡œ ë¦¬ì…‹</button>
          </div>
        </div>
        <small class="help">â€» ë§ˆìš°ìŠ¤ íœ ë¡œ í™•ëŒ€/ì¶•ì†Œ, ë“œë˜ê·¸ë¡œ ìœ„ì¹˜ ì´ë™ (ëª¨ë°”ì¼ì€ í•€ì¹˜/ë“œë˜ê·¸)</small>
      </div>
    </details>

    <details open>
      <summary>ğŸ§© ì†Œì¼“ <span class="hint">í”„ë¦¬ì…‹ Â· íŒŒì¼ Â· ì‚­ì œ</span></summary>
      <div class="section-body">
        <div class="row-2auto" style="margin-bottom:8px">
          <div>
            <label>ì†Œì¼“ í”„ë¦¬ì…‹</label>
            <select id="socketPresetSelect">
              <option value="socket-octopusH.png">OCTOPUS H</option>
              <option value="socket-octopusleg.png">OCTOPUS LEG</option>
              <option value="socket-zinrailogo.png">ZiNRAiLOGO</option>
            </select>
          </div>
          <button class="btn" id="addSocketPresetBtn" type="button">í”„ë¦¬ì…‹ ì¶”ê°€</button>
        </div>

        <div class="row" style="grid-template-columns:1fr 1fr;margin-top:4px">
          <button id="addSocketFile" class="btn" type="button">ğŸ§© íŒŒì¼ë¡œ ì†Œì¼“ ì¶”ê°€</button>
          <button id="removeLast" class="btn" type="button">ğŸ—‘ï¸ ë§ˆì§€ë§‰ ì†Œì¼“ ì‚­ì œ</button>
        </div>
        <span id="socketInfo" style="display:block;margin-top:6px;color:#a7adc0">ì†Œì¼“ 0ê°œ</span>
        <input id="socketFile" type="file" accept="image/*" multiple style="display:none" />
      </div>
    </details>

    <details>
      <summary>âœ¨ ë„¤ì˜¨ í”„ë¦¬ì…‹/íŒŒì¼ <span class="hint">ì¥ì‹ ì´ë¯¸ì§€</span></summary>
      <div class="section-body subgrid">
        <div>
          <label>ë„¤ì˜¨ í”„ë¦¬ì…‹</label>
          <select id="neonPresetSelect">
            <option value="">ì‚¬ìš© ì•ˆ í•¨</option>
            <option value="free-taccyl.png">free-taccyl</option>
          </select>
        </div>
        <div>
          <label>ë„¤ì˜¨ íŒŒì¼</label>
          <div class="row">
            <button id="neonPickBtn" class="btn" type="button">âœ¨ íŒŒì¼ ì„ íƒ</button>
            <button id="neonClearBtn" class="btn" type="button">ğŸ§¹ ë„¤ì˜¨ ì œê±°</button>
          </div>
          <input id="neonFile" type="file" accept="image/*" style="display:none" />
        </div>
      </div>
    </details>

    <details>
      <summary>ğŸ¨ ë°°ê²½ ì˜¤ë²„ë ˆì´ <span class="hint">ìƒ‰ìƒ/íˆ¬ëª…ë„</span></summary>
      <div class="section-body">
        <div class="row">
          <div class="inline">
            <input id="cardBgColor" type="color" value="#111522" />
            <small>ìƒ‰ìƒ</small>
          </div>
          <div class="inline" style="justify-content:space-between">
            <input id="cardBgAlpha" type="range" min="0" max="100" value="100" />
            <small><span id="alphaVal">100</span>%</small>
          </div>
        </div>
      </div>
    </details>

    <details open>
      <summary>ğŸ§­ ì„¸ë°€ ì¡°ì •: ìš”ì†Œ ìœ„ì¹˜ <span class="hint">ìƒí•˜(px) Â· Â± ë²„íŠ¼</span></summary>
      <div class="section-body">
        <div class="pos-grid"><small>ë°°ì§€</small><input id="pos-badge" type="number" value="0"/><button class="btn btn-square" onclick="adjPos('badge',-1)">-</button><button class="btn btn-square" onclick="adjPos('badge',1)">+</button><button class="btn" onclick="zeroPos('badge')">0</button></div>
        <div class="pos-grid"><small>í”„ë¡œí•„</small><input id="pos-pp" type="number" value="7"/><button class="btn btn-square" onclick="adjPos('pp',-1)">-</button><button class="btn btn-square" onclick="adjPos('pp',1)">+</button><button class="btn" onclick="zeroPos('pp')">0</button></div>
        <div class="pos-grid"><small>ì´ë¦„</small><input id="pos-name" type="number" value="6"/><button class="btn btn-square" onclick="adjPos('name',-1)">-</button><button class="btn btn-square" onclick="adjPos('name',1)">+</button><button class="btn" onclick="zeroPos('name')">0</button></div>
        <div class="pos-grid"><small>íƒ€ì´í‹€</small><input id="pos-rank" type="number" value="7"/><button class="btn btn-square" onclick="adjPos('rank',-1)">-</button><button class="btn btn-square" onclick="adjPos('rank',1)">+</button><button class="btn" onclick="zeroPos('rank')">0</button></div>
        <div class="pos-grid"><small>ë¸Œëœë“œ</small><input id="pos-brand" type="number" value="11"/><button class="btn btn-square" onclick="adjPos('brand',-1)">-</button><button class="btn btn-square" onclick="adjPos('brand',1)">+</button><button class="btn" onclick="zeroPos('brand')">0</button></div>
        <div class="pos-grid"><small>ì†Œì¼“</small><input id="pos-socket" type="number" value="32"/><button class="btn btn-square" onclick="adjPos('socket',-1)">-</button><button class="btn btn-square" onclick="adjPos('socket',1)">+</button><button class="btn" onclick="zeroPos('socket')">0</button></div>
        <div class="pos-grid"><small>ë„¤ì˜¨</small><input id="pos-neon" type="number" value="-25"/><button class="btn btn-square" onclick="adjPos('neon',-1)">-</button><button class="btn btn-square" onclick="adjPos('neon',1)">+</button><button class="btn" onclick="zeroPos('neon')">0</button></div>
        <div class="pos-grid"><small>í•˜ë‹¨ë¬¸êµ¬</small><input id="pos-footer" type="number" value="-5"/><button class="btn btn-square" onclick="adjPos('footer',-1)">-</button><button class="btn btn-square" onclick="adjPos('footer',1)">+</button><button class="btn" onclick="zeroPos('footer')">0</button></div>
      </div>
    </details>

    <details>
      <summary>ğŸ”¤ ì„¸ë°€ ì¡°ì •: í°íŠ¸ í¬ê¸° <span class="hint">px Â· Â± ë²„íŠ¼</span></summary>
      <div class="section-body">
        <div class="row-3"><small>ì´ë¦„</small><input type="number" id="nameFont" value="30"/><button class="btn" onclick="adjFont('nameFont',1)">+</button><button class="btn" onclick="adjFont('nameFont',-1)">-</button></div>
        <div class="row-3"><small>íƒ€ì´í‹€</small><input type="number" id="rankFont" value="24"/><button class="btn" onclick="adjFont('rankFont',1)">+</button><button class="btn" onclick="adjFont('rankFont',-1)">-</button></div>
        <div class="row-3"><small>ë¸Œëœë“œ</small><input type="number" id="brandFont" value="18"/><button class="btn" onclick="adjFont('brandFont',1)">+</button><button class="btn" onclick="adjFont('brandFont',-1)">-</button></div>
        <div class="row-3"><small>í•˜ë‹¨ë¬¸êµ¬</small><input type="number" id="footerFont" value="14"/><button class="btn" onclick="adjFont('footerFont',1)">+</button><button class="btn" onclick="adjFont('footerFont',-1)">-</button></div>
      </div>
    </details>
  </div>

  <div class="canvas">
    <h2 style="margin:0 0 8px 0">ë¯¸ë¦¬ë³´ê¸°</h2>
    <div class="card" id="card" role="img" aria-label="Team Chance ì¹´ë“œ">
      <div class="frame" id="frame"></div>
      <img id="frameImg" class="frame-img" alt="" />
      <div class="badge">Congratulations!! ğŸ‰</div>

      <div class="pp" id="ppWrap">
        <img id="ppImg" alt="profile" />
        <div class="placeholder" id="ppPlaceholder">ğŸ‘¤</div>
      </div>

      <div class="name"><span id="nameText">[ì´ë¦„]</span><span class="octo-tag" id="octoTag">OCTOPUS</span></div>
      <div class="rank" id="rankView"></div>
      <div class="brand">ğŸŒŸ TEAM CHANCE ğŸŒŸ</div>
      <div class="sockets" id="sockets"></div>

      <div class="neon-image-block"><img id="neonImg" alt="neon text" style="display:none" /></div>

      <div class="footer-text">Awaken the Movement ğŸŒŠ This is ZiNRAi ğŸ”¥</div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script>
/* ============================================================
  JavaScript (ê¸°ëŠ¥) ì˜ì—­
  ì›¹ í˜ì´ì§€ì˜ ëª¨ë“  ë™ì ì¸ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. 
  ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ ëˆ„ë¥´ê±°ë‚˜, íŒŒì¼ì„ ì„ íƒí•˜ê±°ë‚˜, ê¸€ìë¥¼ ì…ë ¥í•˜ëŠ” ë“±ì˜ í–‰ë™ì— ë°˜ì‘í•˜ì—¬
  ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³ , ìµœì¢…ì ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
  ============================================================
*/

/* ========= ì…€ë ‰í„° í—¬í¼ í•¨ìˆ˜ ========= */
// document.querySelectorë¥¼ ì§§ê²Œ ì“°ê¸° ìœ„í•œ ë‹¨ì¶• í•¨ìˆ˜ì…ë‹ˆë‹¤.
const $$=(s)=>document.querySelector(s);
// document.querySelectorAllì„ ì§§ê²Œ ì“°ê³ , ê²°ê³¼ë¥¼ ì‹¤ì œ ë°°ì—´ë¡œ ë³€í™˜í•˜ëŠ” ë‹¨ì¶• í•¨ìˆ˜ì…ë‹ˆë‹¤.
const $all=(s,root=document)=>Array.from(root.querySelectorAll(s));

/* ========= ìƒìˆ˜ (ê¸°ë³¸ ì„¤ì •ê°’) ========= */
// ì´ ë¶€ë¶„ì€ ì¹´ë“œì˜ ê¸°ë³¸ ë°ì´í„°ë¥¼ ì •ì˜í•˜ëŠ” ê³³ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ë­í¬ë‚˜ í”„ë¦¬ì…‹ì„ ì¶”ê°€í•˜ë ¤ë©´ ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ë©´ ë©ë‹ˆë‹¤.

// ê° ë­í¬(íƒ€ì´í‹€)ë³„ í¬ì¸íŠ¸ ìƒ‰ìƒì„ ì •ì˜í•©ë‹ˆë‹¤. 
// ì—¬ê¸°ì— ìƒˆ ë­í¬ë¥¼ ì¶”ê°€í•˜ë©´ (ì˜ˆ: "CORE 10000":"#ff00ff"), í•´ë‹¹ ë­í¬ ì„ íƒ ì‹œ í”„ë¡œí•„ í…Œë‘ë¦¬ì™€ ë­í¬ í…ìŠ¤íŠ¸ ìƒ‰ìƒì´ ìë™ìœ¼ë¡œ ë°”ë€ë‹ˆë‹¤.
const COLORS={ "CORE 600":"#bfbfbf", "CORE 1250":"#4caf50", "CORE 2500":"#2196f3", "CORE 5000":"#ffeb3b" };

/* (ì¤‘ìš”) jsDelivr CDN ì£¼ì†Œ: í”„ë ˆì„, ë°°ê²½, ì†Œì¼“ ë“± ê¸°ë³¸ ì´ë¯¸ì§€ë“¤ì´ ì €ì¥ëœ ì›¹ ì£¼ì†Œì…ë‹ˆë‹¤. */
// @masterê°€ ë¶™ì€ ì²« ë²ˆì§¸ ì£¼ì†Œë¥¼ ìš°ì„ ì ìœ¼ë¡œ ì‹œë„í•˜ê³ , ì‹¤íŒ¨í•˜ë©´ ë‘ ë²ˆì§¸ ì£¼ì†Œë¥¼ ì‹œë„í•˜ì—¬ ì•ˆì •ì„±ì„ ë†’ì…ë‹ˆë‹¤.
const CDN_BASES = [
  "https://cdn.jsdelivr.net/gh/kimchance85/Rankcard@master/assets/", // 1ìˆœìœ„
  "https://cdn.jsdelivr.net/gh/kimchance85/Rankcard/assets/",      // 2ìˆœìœ„ (í´ë°±)
];

/* í”„ë¦¬ì…‹/ì†Œì¼“ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ ì‚¬ìš©í•  ê¸°ë³¸ URLì„ ë§Œë“­ë‹ˆë‹¤. */
const assetUrl = (path) => CDN_BASES[0] + path;

/* ì´ë¯¸ì§€ ë¡œë“œ ì‹œë„ ìˆœì„œ: PNG -> WEBP -> JPG -> JPEG. ì´ ìˆœì„œëŒ€ë¡œ íŒŒì¼ì„ ì°¾ì•„ë´…ë‹ˆë‹¤. */
const EXT_CANDIDATES = ['.png', '.webp', '.jpg', '.jpeg'];

/* ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜: ì‚¬ìš© ê°€ëŠ¥í•œ ì²« ë²ˆì§¸ ì´ë¯¸ì§€ URLì„ ì°¾ì•„ ë°˜í™˜í•©ë‹ˆë‹¤.
  ì˜ˆë¥¼ ë“¤ì–´ 'frame-core-600' ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ë•Œ,
  1. 1ë²ˆ CDN ì£¼ì†Œ + frame-core-600.png
  2. 1ë²ˆ CDN ì£¼ì†Œ + frame-core-600.webp
  ...
  3. 2ë²ˆ CDN ì£¼ì†Œ + frame-core-600.png
  ...
  ì´ëŸ° ì‹ìœ¼ë¡œ ëª¨ë“  ì¡°í•©ì„ ì‹œë„í•´ì„œ ê°€ì¥ ë¨¼ì € ì„±ê³µí•˜ëŠ” ì´ë¯¸ì§€ ì£¼ì†Œë¥¼ ì°¾ì•„ëƒ…ë‹ˆë‹¤.
  ì´ë¥¼ í†µí•´ ì´ë¯¸ì§€ íŒŒì¼ì˜ í™•ì¥ìê°€ ë‹¤ë¥´ê±°ë‚˜, CDN ì„œë²„ì— ë¬¸ì œê°€ ìƒê²¨ë„ ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
*/
async function loadFirstAvailable(basePathNoExt){
  for (const base of CDN_BASES){
    for (const ext of EXT_CANDIDATES){
      const url = base + basePathNoExt + ext;
      const ok = await new Promise(res=>{
        const img = new Image();
        img.crossOrigin = 'anonymous'; // ë‹¤ë¥¸ ë„ë©”ì¸ì˜ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ í•„ìš”
        img.onload  = ()=>res(true);  // ë¡œë“œ ì„±ê³µ ì‹œ true ë°˜í™˜
        img.onerror = ()=>res(false); // ë¡œë“œ ì‹¤íŒ¨ ì‹œ false ë°˜í™˜
        img.src = url;
      });
      if(ok) return url; // ì„±ê³µí•˜ë©´ ì¦‰ì‹œ URL ë°˜í™˜
    }
  }
  throw new Error('No asset found: ' + basePathNoExt); // ëª¨ë“  ì‹œë„ê°€ ì‹¤íŒ¨í•˜ë©´ ì—ëŸ¬ ë°œìƒ
}

/* ë­í¬ ì„ íƒ ì‹œ ìë™ìœ¼ë¡œ ë§¤í•‘ë  í”„ë ˆì„ ì´ë¯¸ì§€ íŒŒì¼ ì´ë¦„ (í™•ì¥ì ì œì™¸) */
const FRAME_BASES={
  "CORE 600":  "frame-core-600",
  "CORE 1250": "frame-core-1250",
  "CORE 2500": "frame-core-2500",
  "CORE 5000": "frame-core-5000",
};
/* ë­í¬ ì„ íƒ ì‹œ ìë™ìœ¼ë¡œ ë§¤í•‘ë  ë°°ê²½ ì´ë¯¸ì§€ íŒŒì¼ ì´ë¦„ (í™•ì¥ì ì œì™¸) */
const BG_BASES={
  "CORE 600":  "bg-core-600",
  "CORE 1250": "bg-core-1250",
  "CORE 2500": "bg-core-2500",
  "CORE 5000": "bg-core-5000",
};

/* ========= DOM ìºì‹œ: ìì£¼ ì‚¬ìš©í•˜ëŠ” HTML ìš”ì†Œë“¤ì„ ë¯¸ë¦¬ ë³€ìˆ˜ì— ì €ì¥í•´ë‘ì–´ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤. ========= */
const card=$$('#card'), frame=$$('#frame'), frameImg=$$('#frameImg');
const sel=$$('#rankSelect'), nameInput=$$('#nameInput'), nameText=$$('#nameText'), rankView=$$('#rankView');
const ppWrap=$$('#ppWrap'), ppImg=$$('#ppImg'), ppPlaceholder=$$('#ppPlaceholder'), photoInput=$$('#photoInput'), ppReset=$$('#ppReset');
const cardBgColor=$$('#cardBgColor'), cardBgAlpha=$$('#cardBgAlpha'), alphaVal=$$('#alphaVal'), bgFit=$$('#bgFit');
const neonPickBtn=$$('#neonPickBtn'), neonClearBtn=$$('#neonClearBtn'), neonFile=$$('#neonFile'), neonImg=$$('#neonImg');
const neonPresetSelect=$$('#neonPresetSelect');
const bgPresetSelect=$$('#bgPresetSelect');
const socketPresetSelect=$$('#socketPresetSelect'), addSocketPresetBtn=$$('#addSocketPresetBtn');
const octoToggle=$$('#octoToggle'), octoTag=$$('#octoTag');
const socketsWrap=$$('#sockets'), addSocketFileBtn=$$('#addSocketFile'), socketFile=$$('#socketFile'), removeLastBtn=$$('#removeLast'), socketInfo=$$('#socketInfo');
const saveBtn=$$('#saveBtn');

/* ìœ„ì¹˜/í°íŠ¸ input ìš”ì†Œë“¤ì„ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ê°ì²´ì— ì €ì¥í•©ë‹ˆë‹¤. */
const posIds=['badge','pp','name','rank','brand','socket','neon','footer'];
const posInputs=Object.fromEntries(posIds.map(id=>[id,$$('#pos-'+id)]));
const fontIds=['nameFont','rankFont','brandFont','footerFont'];
const fontInputs=Object.fromEntries(fontIds.map(id=>[id,$$('#'+id)]));

/* í”„ë ˆì„/ë°°ê²½ íŒŒì¼ ìˆ˜ë™ ì„¤ì •(Override) ê´€ë ¨ ìš”ì†Œ ë° ë³€ìˆ˜ */
const pickFrameBtn=$$('#pickFrameFile'), frameFileInput=$$('#frameFileInput'), clearFrameOverrideBtn=$$('#clearFrameOverride');
const pickBgBtn=$$('#pickBgFile'), bgFileInput=$$('#bgFileInput'), clearBgOverrideBtn=$$('#clearBgOverride');
let frameOverride=null;  // ì‚¬ìš©ìê°€ ì§ì ‘ ì—…ë¡œë“œí•œ í”„ë ˆì„ ì´ë¯¸ì§€ ë°ì´í„°(dataURL)ë¥¼ ì €ì¥í•  ë³€ìˆ˜
let bgOverride=null;     // ì‚¬ìš©ìê°€ ì§ì ‘ ì—…ë¡œë“œí•œ ë°°ê²½ ì´ë¯¸ì§€ ë°ì´í„°(dataURL)ë¥¼ ì €ì¥í•  ë³€ìˆ˜
let bgPresetOverride=""; // ì‚¬ìš©ìê°€ ì„ íƒí•œ ë°°ê²½ í”„ë¦¬ì…‹ íŒŒì¼ëª…ì„ ì €ì¥í•  ë³€ìˆ˜

/* ========= ë°°ê²½ ì˜¤ë²„ë ˆì´(ìƒ‰/íˆ¬ëª…ë„) ì ìš© í•¨ìˆ˜ ========= */
// 16ì§„ìˆ˜ ìƒ‰ìƒ ì½”ë“œ(#ffffff)ë¥¼ RGBê°’(r,g,b)ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
function hexToRgb(hex){hex=hex.replace('#','');if(hex.length===3)hex=hex.split('').map(h=>h+h).join('');const n=parseInt(hex,16);return{r:(n>>16)&255,g:(n>>8)&255,b:n&255};}
// ì¹´ë“œ ë°°ê²½ìƒ‰ê³¼ íˆ¬ëª…ë„ë¥¼ ì ìš©í•˜ëŠ” í•¨ìˆ˜
function applyCardBg(){
  const {r,g,b}=hexToRgb(cardBgColor.value); 
  const a=Number(cardBgAlpha.value)/100; // íˆ¬ëª…ë„ ìŠ¬ë¼ì´ë” ê°’ì„ 0~1 ì‚¬ì´ì˜ ê°’ìœ¼ë¡œ ë³€í™˜
  card.style.backgroundColor=`rgba(${r},${g},${b},${a})`; // ì¹´ë“œ ë°°ê²½ìƒ‰ ì„¤ì •
  alphaVal.textContent=cardBgAlpha.value; // ìŠ¬ë¼ì´ë” ì˜† ìˆ«ì ì—…ë°ì´íŠ¸

  // ë°°ê²½ìƒ‰ì˜ ë°ê¸°ë¥¼ ê³„ì‚°í•˜ì—¬ ê¸€ììƒ‰ì„ ìë™ìœ¼ë¡œ í°ìƒ‰ ë˜ëŠ” ê²€ì€ìƒ‰ìœ¼ë¡œ ë³€ê²½ (ê°€ë…ì„± í–¥ìƒ)
  const relLum=(0.2126*(r/255)**2.2 + 0.7152*(g/255)**2.2 + 0.0722*(b/255)**2.2) * a;
  card.style.color=(relLum>0.4)?'#111':'#fff';
}
// ìƒ‰ìƒ ì„ íƒê¸°ë‚˜ íˆ¬ëª…ë„ ìŠ¬ë¼ì´ë” ê°’ì´ ë°”ë€” ë•Œë§ˆë‹¤ applyCardBg í•¨ìˆ˜ë¥¼ í˜¸ì¶œ
cardBgColor.addEventListener('input',applyCardBg);
cardBgAlpha.addEventListener('input',applyCardBg);
// ë°°ê²½ ì±„ìš°ê¸° ë°©ì‹(cover/contain)ì´ ë³€ê²½ë  ë•Œ ì¹´ë“œ ë°°ê²½ ìŠ¤íƒ€ì¼ì„ ì—…ë°ì´íŠ¸
bgFit.addEventListener('change',e=>{ card.style.backgroundSize=e.target.value; });

/* ========= íƒ€ì´í‹€(ë­í¬) í‘œì‹œ í•¨ìˆ˜ ========= */
function applyTitle(title){
  if(title){ // íƒ€ì´í‹€ì´ ì„ íƒëœ ê²½ìš°
    rankView.style.display='block'; // íƒ€ì´í‹€ í…ìŠ¤íŠ¸ë¥¼ ë³´ì´ê²Œ í•¨
    const accent=COLORS[title]||"#6aa8ff"; // COLORS ê°ì²´ì—ì„œ í•´ë‹¹ íƒ€ì´í‹€ì˜ ìƒ‰ìƒì„ ì°¾ê³ , ì—†ìœ¼ë©´ ê¸°ë³¸ìƒ‰ ì‚¬ìš©
    rankView.innerHTML=`<span style="color:${accent}">â˜… ${title}</span>`; // íƒ€ì´í‹€ í…ìŠ¤íŠ¸ì™€ ìƒ‰ìƒ ì ìš©
    $$('.pp').style.borderColor=accent; // í”„ë¡œí•„ ì‚¬ì§„ í…Œë‘ë¦¬ ìƒ‰ìƒë„ ë³€ê²½
  }
  else { // íƒ€ì´í‹€ì´ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš°
    rankView.style.display='none'; // íƒ€ì´í‹€ í…ìŠ¤íŠ¸ ìˆ¨ê¹€
    rankView.innerHTML='';
    $$('.pp').style.borderColor='var(--accent)'; // í”„ë¡œí•„ í…Œë‘ë¦¬ ìƒ‰ìƒì„ ê¸°ë³¸ê°’ìœ¼ë¡œ
  }
}

/* ë³´ì¡° í•¨ìˆ˜: íŒŒì¼ ì´ë¦„ì—ì„œ í™•ì¥ì(.png ë“±)ë¥¼ ì œê±°í•©ë‹ˆë‹¤. */
function stripExt(name){ return (name||'').replace(/\.(png|webp|jpg|jpeg)$/i,''); }

/* ========= í”„ë ˆì„/ë°°ê²½ ì ìš© ìš°ì„ ìˆœìœ„ ë¡œì§ =========
  ì•„ë˜ í•¨ìˆ˜ë“¤ì€ ì–´ë–¤ í”„ë ˆì„ê³¼ ë°°ê²½ì„ ë³´ì—¬ì¤„ì§€ ê²°ì •í•©ë‹ˆë‹¤. ìš°ì„ ìˆœìœ„ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
  1ìˆœìœ„: ì‚¬ìš©ìê°€ ì§ì ‘ ì—…ë¡œë“œí•œ íŒŒì¼ (frameOverride, bgOverride)
  2ìˆœìœ„: ì‚¬ìš©ìê°€ ì„ íƒí•œ í”„ë¦¬ì…‹ (bgPresetOverride)
  3ìˆœìœ„: íƒ€ì´í‹€(ë­í¬)ì— ë”°ë¼ ìë™ìœ¼ë¡œ ë§¤í•‘ëœ ì´ë¯¸ì§€ (FRAME_BASES, BG_BASES)
  4ìˆœìœ„: ëª¨ë‘ ì—†ì„ ê²½ìš° ê¸°ë³¸ ìŠ¤íƒ€ì¼
*/
// íƒ€ì´í‹€ì— ë§ëŠ” í”„ë ˆì„ì„ ì ìš©í•˜ëŠ” í•¨ìˆ˜
async function applyFrameForRank(title){
  // 1ìˆœìœ„: ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ í”„ë ˆì„ì´ ìˆëŠ”ì§€ í™•ì¸
  if(frameOverride){
    frame.style.boxShadow='none'; // ê¸°ë³¸ í…Œë‘ë¦¬ íš¨ê³¼ ì œê±°
    frameImg.src = frameOverride; // ì—…ë¡œë“œí•œ ì´ë¯¸ì§€ ì ìš©
    frameImg.style.display='block';
    return;
  }
  // 3ìˆœìœ„: íƒ€ì´í‹€ì— ë§¤í•‘ëœ í”„ë ˆì„ ë² ì´ìŠ¤ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
  const base = FRAME_BASES[title];
  if(!base){ // ë§¤í•‘ëœ í”„ë ˆì„ì´ ì—†ìœ¼ë©´
    frameImg.removeAttribute('src');
    frameImg.style.display='none';
    frame.style.boxShadow='inset 0 0 0 2px rgba(255,255,255,.18)'; // ê¸°ë³¸ í…Œë‘ë¦¬ íš¨ê³¼ í‘œì‹œ
    return;
  }
  try{ // loadFirstAvailable í•¨ìˆ˜ë¡œ ì‹¤ì œ ì´ë¯¸ì§€ URL ì°¾ê¸°
    const url = await loadFirstAvailable(base);
    frame.style.boxShadow='none';
    frameImg.src = url;
    frameImg.style.display='block';
  }catch(e){ // ì´ë¯¸ì§€ ë¡œë“œì— ì‹¤íŒ¨í•˜ë©´
    frameImg.removeAttribute('src');
    frameImg.style.display='none';
    frame.style.boxShadow='inset 0 0 0 2px rgba(255,255,255,.18)';
  }
}

// íƒ€ì´í‹€ì— ë§ëŠ” ë°°ê²½ì„ ì ìš©í•˜ëŠ” í•¨ìˆ˜
async function applyBgForRank(title){
  let url = "";
  // 1ìˆœìœ„: ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ ë°°ê²½ì´ ìˆëŠ”ì§€ í™•ì¸
  if(bgOverride){
    url = bgOverride;
  }
  // 2ìˆœìœ„: ì‚¬ìš©ìê°€ ì„ íƒí•œ ë°°ê²½ í”„ë¦¬ì…‹ì´ ìˆëŠ”ì§€ í™•ì¸
  else if(bgPresetOverride){
    const base = stripExt(bgPresetOverride); // í™•ì¥ì ì œê±°
    try{
      url = await loadFirstAvailable(base); // ì‹¤ì œ ì´ë¯¸ì§€ URL ì°¾ê¸°
    }catch(e){ url = ""; }
  }

  // 1, 2ìˆœìœ„ì—ì„œ URLì„ ëª» ì°¾ì•˜ê³ , 3ìˆœìœ„(ìë™ ë§¤í•‘) ì¡°ê±´ì´ ë§ìœ¼ë©´ ì‹œë„
  if(!url && title && BG_BASES[title]){
    try{
      url = await loadFirstAvailable(BG_BASES[title]);
    }catch(e){ url = ""; }
  }

  // ìµœì¢…ì ìœ¼ë¡œ ì°¾ì€ URLì„ ì¹´ë“œ ë°°ê²½ ì´ë¯¸ì§€ë¡œ ì„¤ì •
  card.style.backgroundImage = url ? `url(${url})` : '';
  card.style.backgroundSize = bgFit.value; // ë°°ê²½ ì±„ìš°ê¸° ë°©ì‹ ì ìš©
}

// í”„ë ˆì„ê³¼ ë°°ê²½ì„ í•œ ë²ˆì— ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
function updateFrameAndBg(){
  const title=sel.value||"";
  applyFrameForRank(title);
  applyBgForRank(title);
}

/* ========= ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ: ì‚¬ìš©ìì˜ í–‰ë™ì— ë°˜ì‘í•˜ëŠ” ë¶€ë¶„ ========= */

// íƒ€ì´í‹€(ë­í¬) ì„ íƒì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ
sel.addEventListener('change',()=>{ 
  applyTitle(sel.value); // íƒ€ì´í‹€ í…ìŠ¤íŠ¸ì™€ ìƒ‰ìƒ ì—…ë°ì´íŠ¸
  updateFrameAndBg(); // í”„ë ˆì„ê³¼ ë°°ê²½ ì—…ë°ì´íŠ¸
});

/* í”„ë ˆì„ íŒŒì¼ ì—…ë¡œë“œ ê´€ë ¨ */
pickFrameBtn.addEventListener('click',()=>frameFileInput.click()); // 'í”„ë ˆì„ íŒŒì¼ ì„ íƒ' ë²„íŠ¼ í´ë¦­ ì‹œ ìˆ¨ê²¨ì§„ input í´ë¦­
frameFileInput.addEventListener('change',e=>{
  const f=e.target.files?.[0]; if(!f) return;
  const r=new FileReader(); // FileReader ê°ì²´ë¡œ íŒŒì¼ ì½ê¸°
  r.onload=ev=>{ frameOverride=ev.target.result; updateFrameAndBg(); }; // íŒŒì¼ ì½ê¸°ê°€ ëë‚˜ë©´ frameOverride ë³€ìˆ˜ì— ì €ì¥í•˜ê³  ì—…ë°ì´íŠ¸
  r.readAsDataURL(f); // íŒŒì¼ì„ Data URL í˜•íƒœë¡œ ì½ê¸° ì‹œì‘
  frameFileInput.value=""; // ë‹¤ìŒ ì„ íƒì„ ìœ„í•´ input ê°’ ë¹„ìš°ê¸°
});
clearFrameOverrideBtn.addEventListener('click',()=>{ frameOverride=null; updateFrameAndgwBg(); }); // 'ìˆ˜ë™ í•´ì œ' ë²„íŠ¼ í´ë¦­ ì‹œ override ë³€ìˆ˜ ë¹„ìš°ê³  ì—…ë°ì´íŠ¸

/* ë°°ê²½ íŒŒì¼ ì—…ë¡œë“œ ê´€ë ¨ (í”„ë ˆì„ê³¼ ë™ì¼í•œ ë¡œì§) */
pickBgBtn.addEventListener('click',()=>bgFileInput.click());
bgFileInput.addEventListener('change',e=>{
  const f=e.target.files?.[0]; if(!f) return;
  const r=new FileReader(); r.onload=ev=>{ bgOverride=ev.target.result; updateFrameAndBg(); };
  r.readAsDataURL(f); bgFileInput.value="";
});
clearBgOverrideBtn.addEventListener('click',()=>{ bgOverride=null; updateFrameAndBg(); });

/* ë°°ê²½ í”„ë¦¬ì…‹ ì„ íƒ ê´€ë ¨ */
bgPresetSelect.addEventListener('change',()=>{
  bgPresetOverride = bgPresetSelect.value || "";
  updateFrameAndBg();
});

/* ë„¤ì˜¨ í”„ë¦¬ì…‹ ì„ íƒ ê´€ë ¨ */
neonPresetSelect.addEventListener('change',()=>{
  const v=neonPresetSelect.value;
  if(v){ neonImg.src = assetUrl(v); neonImg.style.display='block'; }
  else { neonImg.removeAttribute('src'); neonImg.style.display='none'; }
});
/* ë„¤ì˜¨ íŒŒì¼ ì—…ë¡œë“œ ê´€ë ¨ (í”„ë ˆì„/ë°°ê²½ê³¼ ìœ ì‚¬) */
neonPickBtn.addEventListener('click',()=>neonFile.click());
neonFile.addEventListener('change',e=>{
  const f=e.target.files?.[0]; if(!f) return;
  const r=new FileReader(); r.onload=ev=>{ neonImg.src=ev.target.result; neonImg.style.display='block'; };
  r.readAsDataURL(f); neonFile.value="";
});
neonClearBtn.addEventListener('click',()=>{ neonImg.removeAttribute('src'); neonImg.style.display='none'; });

/* ì´ë¦„ ì…ë ¥ / OCTOPUS íƒœê·¸ í† ê¸€ */
nameInput.addEventListener('input',()=>{ nameText.textContent=nameInput.value||"[ì´ë¦„]"; });
octoToggle.addEventListener('change',()=>{ octoTag.style.display=octoToggle.checked?'inline-block':'none'; });

/* ========= í”„ë¡œí•„ ì‚¬ì§„ ë“œë˜ê·¸/ì¤Œ/í•€ì¹˜ ê¸°ëŠ¥ (ë³µì¡í•œ ë¶€ë¶„) ========= */
// ì´ë¯¸ì§€ì˜ ìƒíƒœ(í¬ê¸°, ìœ„ì¹˜, ë°°ìœ¨ ë“±)ë¥¼ ì €ì¥í•˜ëŠ” ê°ì²´
let imgState={naturalW:0,naturalH:0,baseW:0,baseH:0,scale:1,x:0,y:0,dragging:false,startX:0,startY:0,pinch:false,pinchD0:0,scale0:1};
// ì´ë¯¸ì§€ë¥¼ ì›í˜• í”„ë¡œí•„ ì˜ì—­ì— ê½‰ ì°¨ê²Œ ë§ì¶”ëŠ”(cover) ì´ˆê¸°í™” í•¨ìˆ˜
function coverFit(){const cw=ppWrap.clientWidth,ch=ppWrap.clientHeight,iw=imgState.naturalW,ih=imgState.naturalH;if(!iw||!ih)return;
  if(iw/ih>=cw/ch){imgState.baseH=ch;imgState.baseW=ch*iw/ih;}else{imgState.baseW=cw;imgState.baseH=cw*ih/iw;}
  imgState.scale=1;imgState.x=(cw-imgState.baseW)/2;imgState.y=(ch-imgState.baseH)/2;applyImgStyle();}
// ê°’ì„ ìµœì†Œ(min), ìµœëŒ€(max) ë²”ìœ„ ì•ˆì— ìˆë„ë¡ ì œí•œí•˜ëŠ” í•¨ìˆ˜
function clamp(v,min,max){return Math.min(max,Math.max(min,v));}
// imgStateì— ì €ì¥ëœ ê°’ë“¤ì„ ì‹¤ì œ ì´ë¯¸ì§€ì˜ CSS ìŠ¤íƒ€ì¼ì— ì ìš©í•˜ëŠ” í•¨ìˆ˜
function applyImgStyle(){const w=imgState.baseW*imgState.scale,h=imgState.baseH*imgState.scale,cw=ppWrap.clientWidth,ch=ppWrap.clientHeight;
  const minX=cw-w,maxX=0,minY=ch-h,maxY=0;imgState.x=(w>=cw)?clamp(imgState.x,minX,maxX):(cw-w)/2;imgState.y=(h>=ch)?clamp(imgState.y,minY,maxY):(ch-h)/2;
  ppImg.style.width=w+'px';ppImg.style.height=h+'px';ppImg.style.left=imgState.x+'px';ppImg.style.top=imgState.y+'px';}
// ë§ˆìš°ìŠ¤ íœ  ì´ë²¤íŠ¸ (ì¤Œ ì¸/ì•„ì›ƒ)
ppWrap.addEventListener('wheel',e=>{e.preventDefault();const f=(e.deltaY<0)?1.08:0.92;const old=imgState.scale,neu=clamp(old*f,1,5);
  const r=ppWrap.getBoundingClientRect(),cx=e.clientX-r.left,cy=e.clientY-r.top;const w0=imgState.baseW*old,h0=imgState.baseH*old,w1=imgState.baseW*neu,h1=imgState.baseH*neu;
  const dx=(cx-imgState.x)/w0,dy=(cy-imgState.y)/h0;imgState.x=cx-dx*w1;imgState.y=cy-dy*h1;imgState.scale=neu;applyImgStyle();},{passive:false});
// ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ ì‹œì‘
ppWrap.addEventListener('pointerdown',e=>{if(e.pointerType&&e.pointerType!=='mouse')return;e.preventDefault();ppWrap.setPointerCapture(e.pointerId);imgState.dragging=true;imgState.startX=e.clientX-imgState.x;imgState.startY=e.clientY-imgState.y;});
// ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ ì¤‘
ppWrap.addEventListener('pointermove',e=>{if(e.pointerType&&e.pointerType!=='mouse')return;if(!imgState.dragging)return;imgState.x=e.clientX-imgState.startX;imgState.y=e.clientY-imgState.startY;applyImgStyle();});
// ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ ë
ppWrap.addEventListener('pointerup',e=>{if(e.pointerType&&e.pointerType!=='mouse')return;imgState.dragging=false;});
ppWrap.addEventListener('pointercancel',e=>{if(e.pointerType&&e.pointerType!=='mouse')return;imgState.dragging=false;});
// (ëª¨ë°”ì¼) ë‘ ì†ê°€ë½ ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜
function touchDistance(t){const dx=t[0].clientX-t[1].clientX,dy=t[0].clientY-t[1].clientY;return Math.hypot(dx,dy);}
// (ëª¨ë°”ì¼) ë‘ ì†ê°€ë½ì˜ ì¤‘ì‹¬ì ì„ ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜
function touchCenter(t){return{x:(t[0].clientX+t[1].clientX)/2,y:(t[0].clientY+t[1].clientY)/2};}
// (ëª¨ë°”ì¼) í„°ì¹˜ ì‹œì‘ (í•œ ì†ê°€ë½ì€ ë“œë˜ê·¸, ë‘ ì†ê°€ë½ì€ í•€ì¹˜ ì¤Œ)
ppWrap.addEventListener('touchstart',e=>{if(e.touches.length===1){e.preventDefault();imgState.dragging=true;imgState.startX=e.touches[0].clientX-imgState.x;imgState.startY=e.touches[0].clientY-imgState.y;}
  else if(e.touches.length===2){e.preventDefault();imgState.pinch=true;imgState.pinchD0=touchDistance(e.touches);imgState.scale0=imgState.scale;imgState.center0=touchCenter(e.touches);}}, {passive:false});
// (ëª¨ë°”ì¼) í„°ì¹˜ ì´ë™
ppWrap.addEventListener('touchmove',e=>{if(e.touches.length===1&&imgState.dragging){e.preventDefault();imgState.x=e.touches[0].clientX-imgState.startX;imgState.y=e.touches[0].clientY-imgState.startY;applyImgStyle();}
  else if(e.touches.length===2&&imgState.pinch){e.preventDefault();const d=touchDistance(e.touches);let neu=clamp(imgState.scale0*(d/imgState.pinchD0),1,5);
    const r=ppWrap.getBoundingClientRect();const cNow=touchCenter(e.touches);const cx=cNow.x-r.left,cy=cNow.y-r.top;const old=imgState.scale,w0=imgState.baseW*old,h0=imgState.baseH*old,w1=imgState.baseW*neu,h1=imgState.baseH*neu;
    const dx=(cx-imgState.x)/w0,dy=(cy-imgState.y)/h0;imgState.x=cx-dx*w1;imgState.y=cy-dy*h1;imgState.scale=neu;applyImgStyle();}}, {passive:false});
// (ëª¨ë°”ì¼) í„°ì¹˜ ë
ppWrap.addEventListener('touchend',e=>{if(e.touches.length===0){imgState.dragging=false;imgState.pinch=false;}if(e.touches.length===1){imgState.pinch=false;}});
// í”„ë¡œí•„ ì‚¬ì§„ íŒŒì¼ì´ ì„ íƒë˜ì—ˆì„ ë•Œ
photoInput.addEventListener('change',e=>{const f=e.target.files?.[0];if(!f){ppImg.style.display='none';ppImg.src='';ppPlaceholder.style.display='flex';return;}
  const r=new FileReader();r.onload=ev=>{ppImg.src=ev.target.result;ppImg.onload=()=>{ppImg.style.display='block';ppPlaceholder.style.display='none';imgState.naturalW=ppImg.naturalWidth;imgState.naturalH=ppImg.naturalHeight;coverFit();};};r.readAsDataURL(f);});
// 'ì„¼í„°ë¡œ ë¦¬ì…‹' ë²„íŠ¼ í´ë¦­ ì‹œ
ppReset.addEventListener('click',()=>{if(ppImg.src)coverFit();});

/* ========= ì†Œì¼“ ê¸°ëŠ¥ ========= */
// ì†Œì¼“ ê°œìˆ˜ì— ë”°ë¼ ë ˆì´ì•„ì›ƒ(ì—´ ê°œìˆ˜)ì„ ë³€ê²½í•˜ê³ , ì†Œì¼“ ê°œìˆ˜ í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
function updateSocketLayout(){const n=$all('.socket',socketsWrap).length;socketsWrap.classList.remove('cols2','cols3','cols4');
  if(n===2)socketsWrap.classList.add('cols2');else if(n===3)socketsWrap.classList.add('cols3');else if(n>=4)socketsWrap.classList.add('cols4');
  socketInfo.textContent=`ì†Œì¼“ ${n}ê°œ`; }
// ìƒˆë¡œìš´ ì†Œì¼“ì„ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
function addSocket(src){const el=document.createElement('div');el.className='socket has-img';el.innerHTML=`<img src="${src}" alt="socket">`;socketsWrap.appendChild(el);updateSocketLayout();}
// 'íŒŒì¼ë¡œ ì†Œì¼“ ì¶”ê°€' ë²„íŠ¼ í´ë¦­
addSocketFileBtn.addEventListener('click',()=>socketFile.click());
// ì†Œì¼“ íŒŒì¼ì´ ì„ íƒë˜ì—ˆì„ ë•Œ (ì—¬ëŸ¬ íŒŒì¼ ì„ íƒ ê°€ëŠ¥)
socketFile.addEventListener('change',e=>{(Array.from(e.target.files||[]).filter(f=>f.type.startsWith('image/'))).forEach(file=>{
  const r=new FileReader();r.onload=ev=>addSocket(ev.target.result);r.readAsDataURL(file);});socketFile.value="";});
// 'ë§ˆì§€ë§‰ ì†Œì¼“ ì‚­ì œ' ë²„íŠ¼ í´ë¦­
removeLastBtn.addEventListener('click',()=>{const items=$all('.socket',socketsWrap);if(!items.length){alert('ì‚­ì œí•  ì†Œì¼“ì´ ì—†ìŠµë‹ˆë‹¤.');return;}items[items.length-1].remove();updateSocketLayout();});
// 'í”„ë¦¬ì…‹ ì¶”ê°€' ë²„íŠ¼ í´ë¦­
addSocketPresetBtn.addEventListener('click',()=>{const file=socketPresetSelect.value; if(!file) return; addSocket(assetUrl(file));});

/* ========= ì¹´ë“œ ì €ì¥ ê¸°ëŠ¥ ========= */
async function saveCard(){
  // requestAnimationFrame: ë¸Œë¼ìš°ì €ê°€ ë Œë”ë§ì„ ë§ˆì¹œ ì§í›„ ìŠ¤í¬ë¦°ìƒ·ì„ ì°ê¸° ìœ„í•œ ì‘ì€ íŠ¸ë¦­
  await new Promise(r=>requestAnimationFrame(r));
  // html2canvasë¥¼ ì‚¬ìš©í•˜ì—¬ #card ìš”ì†Œë¥¼ ìº¡ì²˜. scale:3ì€ ê³ í•´ìƒë„(3ë°°)ë¡œ ì €ì¥í•˜ê¸° ìœ„í•¨.
  const canvas=await html2canvas(card,{backgroundColor:null,scale:3,scrollX:0,scrollY:0,useCORS:true});
  
  // ë‹¤ìš´ë¡œë“œ ë¡œì§
  const a=document.createElement('a'); // ì„ì‹œ <a> íƒœê·¸(ë§í¬) ìƒì„±
  const t=sel.value?`_${sel.value}`:''; // íŒŒì¼ëª…ì— íƒ€ì´í‹€ ì¶”ê°€
  const n=(nameText.textContent||'card').replace(/\s+/g,'_'); // íŒŒì¼ëª…ì— ì´ë¦„ ì¶”ê°€ (ê³µë°±ì€ _ë¡œ ë³€ê²½)
  a.download=`${n}${t}.png`; // ë‹¤ìš´ë¡œë“œë  íŒŒì¼ëª… ì„¤ì •
  a.href=canvas.toDataURL(); // ìº¡ì²˜í•œ ì´ë¯¸ì§€ë¥¼ a íƒœê·¸ì˜ ë§í¬ë¡œ ì„¤ì •
  a.click(); // a íƒœê·¸ë¥¼ ê°•ì œë¡œ í´ë¦­í•˜ì—¬ ë‹¤ìš´ë¡œë“œ ì‹¤í–‰
}
saveBtn.addEventListener('click',saveCard);

/* ========= ìœ„ì¹˜/í°íŠ¸ ì„¸ë°€ ì¡°ì • ê¸°ëŠ¥ ========= */
// ìš”ì†Œì˜ Yì¶• ìœ„ì¹˜ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜
function setPos(id,px){if(!Number.isFinite(px))return;px=Math.round(px);
  // CSS ë³€ìˆ˜(--idY) ê°’ì„ ë³€ê²½í•˜ì—¬ ì‹¤ì œ ìš”ì†Œ ìœ„ì¹˜ë¥¼ ì´ë™
  document.documentElement.style.setProperty('--'+id+'Y',px+'px');
  posInputs[id].value=px; // input í•„ë“œì˜ ê°’ë„ ì—…ë°ì´íŠ¸
}
// Â± ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ìœ„ì¹˜ ê°’ì„ 1ì”© ë³€ê²½í•˜ëŠ” í•¨ìˆ˜
function adjPos(id,delta){const v=parseInt(posInputs[id].value||'0',10)||0;setPos(id,v+delta);}
// '0' ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ìœ„ì¹˜ë¥¼ 0ìœ¼ë¡œ ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜
function zeroPos(id){setPos(id,0);}
// ëª¨ë“  ìœ„ì¹˜ ì¡°ì • inputì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•˜ì—¬, ê°’ì´ ë³€ê²½ë˜ë©´ setPos í•¨ìˆ˜ í˜¸ì¶œ
posIds.forEach(id=>{posInputs[id].addEventListener('input',()=>{const v=parseInt(posInputs[id].value||'0',10)||0;setPos(id,v);});});

// í°íŠ¸ í¬ê¸°ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ (ìœ„ì¹˜ ì¡°ì •ê³¼ ë¡œì§ì´ ìœ ì‚¬)
function setFontVar(id,px){if(!Number.isFinite(px))return;if(px<6)px=6;
  document.documentElement.style.setProperty('--'+id,px+'px');
  fontInputs[id].value=px;
}
// Â± ë²„íŠ¼ìœ¼ë¡œ í°íŠ¸ í¬ê¸°ë¥¼ 1ì”© ë³€ê²½
function adjFont(id,delta){const v=parseInt(fontInputs[id].value||0)||0;setFontVar(id,v+delta);}
// ëª¨ë“  í°íŠ¸ í¬ê¸° inputì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
fontIds.forEach(id=>{fontInputs[id].addEventListener('input',()=>{const v=parseInt(fontInputs[id].value||0)||0;setFontVar(id,v);});});

/* ========= ì´ˆê¸°í™” í•¨ìˆ˜ ========= */
// í˜ì´ì§€ê°€ ì²˜ìŒ ë¡œë“œë  ë•Œ í•œ ë²ˆ ì‹¤í–‰ë˜ì–´, ì¹´ë“œì˜ ì´ˆê¸° ìƒíƒœë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
(function init(){
  applyCardBg();
  card.style.backgroundImage=''; card.style.backgroundSize=bgFit.value;
  $$('#octoTag').style.display='none'; $$('#nameText').textContent='[ì´ë¦„]';
  applyTitle(""); 
  updateFrameAndBg();

  // ì»¨íŠ¸ë¡¤ íŒ¨ë„ì˜ 'ì„¸ë°€ ì¡°ì •' inputì— ì„¤ì •ëœ ì´ˆê¸°ê°’ì„ ì‹¤ì œ ì¹´ë“œ ìŠ¤íƒ€ì¼ì— ì ìš©
  posIds.forEach(id=>setPos(id, parseInt(posInputs[id].value||'0',10)||0));
  fontIds.forEach(fid=>setFontVar(fid, parseInt(fontInputs[fid].value||'0',10)||0));
})();
</script>
</body>
</html>
